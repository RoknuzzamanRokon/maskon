<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .success {
        color: #4caf50;
      }
      .error {
        color: #f44336;
      }
      .info {
        color: #2196f3;
      }
      button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background-color: #0056b3;
      }
      pre {
        background-color: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
        white-space: pre-wrap;
      }
      .status-box {
        padding: 15px;
        border-radius: 5px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üéØ Admin Dashboard Integration Test</h1>
      <p>
        This page tests the integration between the admin page and dashboard
        functionality.
      </p>

      <div
        class="status-box"
        style="background-color: #e3f2fd; border-left: 4px solid #2196f3"
      >
        <h3>‚úÖ Changes Made:</h3>
        <ul>
          <li>
            <strong>Backend:</strong> Added GET /api/admin/notifications
            endpoint
          </li>
          <li>
            <strong>Backend:</strong> Added GET /api/admin/settings endpoint
          </li>
          <li>
            <strong>Backend:</strong> Added PUT /api/admin/settings endpoint
          </li>
          <li>
            <strong>Frontend:</strong> Updated /admin page to show dashboard
            instead of post creation
          </li>
          <li>
            <strong>Frontend:</strong> Added API functions for new endpoints
          </li>
        </ul>
      </div>

      <div
        class="status-box"
        style="background-color: #f3e5f5; border-left: 4px solid #9c27b0"
      >
        <h3>üîÑ What happens now:</h3>
        <ol>
          <li>Visit <code>http://localhost:3000/admin</code></li>
          <li>You'll see the dashboard overview (same as /admin/dashboard)</li>
          <li>
            The dashboard includes metrics, activity feed, and system health
          </li>
          <li>
            The new backend endpoints provide notifications and settings data
          </li>
        </ol>
      </div>

      <div
        class="status-box"
        style="background-color: #e8f5e8; border-left: 4px solid #4caf50"
      >
        <h3>üìä Dashboard Features:</h3>
        <ul>
          <li>
            <strong>Metrics Cards:</strong> Posts, Portfolio, Products, Users
            counts
          </li>
          <li><strong>Activity Feed:</strong> Recent system activity</li>
          <li>
            <strong>System Health:</strong> Server status, uptime, memory usage
          </li>
          <li>
            <strong>Quick Actions:</strong> Create post, add portfolio, create
            product
          </li>
          <li>
            <strong>Notifications:</strong> Unread messages, pending inquiries
          </li>
          <li>
            <strong>Settings:</strong> Admin info, system stats, configuration
          </li>
        </ul>
      </div>

      <div
        class="status-box"
        style="background-color: #fff3e0; border-left: 4px solid #ff9800"
      >
        <h3>üöÄ Next Steps:</h3>
        <ol>
          <li>
            Start your backend server: <code>python backend/main.py</code>
          </li>
          <li>
            Start your frontend server: <code>npm run dev</code> (in frontend
            directory)
          </li>
          <li>
            Login as admin and visit <code>http://localhost:3000/admin</code>
          </li>
          <li>
            You should see the full dashboard instead of the post creation form
          </li>
        </ol>
      </div>

      <button onclick="testEndpoints()">üß™ Test Backend Endpoints</button>
      <button onclick="window.open('http://localhost:3000/admin', '_blank')">
        üåê Open Admin Page
      </button>
      <button
        onclick="window.open('http://localhost:3000/admin/dashboard', '_blank')"
      >
        üìä Open Dashboard Page
      </button>

      <div id="test-results"></div>
    </div>

    <script>
      async function testEndpoints() {
        const resultsDiv = document.getElementById("test-results");
        resultsDiv.innerHTML = "<h3>üîç Testing Backend Endpoints...</h3>";

        const tests = [
          {
            name: "Health Check",
            url: "http://localhost:8000/api/health",
            method: "GET",
            requiresAuth: false,
          },
          {
            name: "Admin Notifications",
            url: "http://localhost:8000/api/admin/notifications",
            method: "GET",
            requiresAuth: true,
          },
          {
            name: "Admin Settings",
            url: "http://localhost:8000/api/admin/settings",
            method: "GET",
            requiresAuth: true,
          },
        ];

        for (const test of tests) {
          try {
            const headers = {};
            if (test.requiresAuth) {
              // Note: In real usage, you'd get this from localStorage
              headers["Authorization"] = "Bearer YOUR_TOKEN_HERE";
            }

            const response = await fetch(test.url, {
              method: test.method,
              headers,
            });

            const status = response.status;
            const statusClass =
              status === 200 ? "success" : status === 401 ? "info" : "error";

            resultsDiv.innerHTML += `
                        <div class="status-box" style="background-color: ${
                          status === 200
                            ? "#e8f5e8"
                            : status === 401
                            ? "#e3f2fd"
                            : "#ffebee"
                        };">
                            <strong>${test.name}:</strong> 
                            <span class="${statusClass}">
                                ${status} ${response.statusText}
                                ${
                                  status === 401
                                    ? "(Expected - requires login)"
                                    : ""
                                }
                            </span>
                        </div>
                    `;
          } catch (error) {
            resultsDiv.innerHTML += `
                        <div class="status-box" style="background-color: #ffebee;">
                            <strong>${test.name}:</strong> 
                            <span class="error">Connection Error - ${error.message}</span>
                        </div>
                    `;
          }
        }
      }
    </script>
  </body>
</html>
